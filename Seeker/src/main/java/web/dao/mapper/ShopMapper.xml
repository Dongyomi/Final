<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="web.dao.face.ShopDao">

	<!-- 카테고리별 상품 리스트 : 1차 분류 -->
	<select id="list_1" resultType="web.dto.GoodsView">
		SELECT
    		g.gdsNum, g.gdsName, g.cateCode, c.cateCodeRef, c.cateName, gdsPrice, gdsStock, gdsDes, gdsDate, ImgOriginName, ImgStoredName
        FROM tbl_goods g
            INNER JOIN goods_category c
                ON g.cateCode = c.cateCode           
            WHERE g.cateCode = #{cateCode}
            	OR c.cateCodeRef = #{cateCodeRef}
	</select>
	
	<!-- 카테고리별 상품 리스트 : 2차 분류 -->
	<select id="list_2" resultType="web.dto.GoodsView">
		SELECT
    		g.gdsNum, g.gdsName, g.cateCode, c.cateCodeRef, c.cateName, gdsPrice, gdsStock, gdsDes, gdsDate, ImgOriginName, ImgStoredName
        FROM tbl_goods g
            INNER JOIN goods_category c
                ON g.cateCode = c.cateCode           
            WHERE g.cateCode = #{cateCode}
	</select>
	
	<!-- 상품 조회 + 카테고리 조인-->
	<select id="goodsView" resultType="web.dto.GoodsView">
 		SELECT
     		g.gdsNum, g.gdsName, g.cateCode, c.cateCodeRef, c.cateName, gdsPrice, gdsStock, gdsDes, gdsDate,ImgOriginName, ImgStoredName
        FROM tbl_goods g, goods_category c                        
        WHERE g.cateCode = c.cateCode  
        AND g.gdsNum = #{gdsNum}
	</select>
	

</mapper>